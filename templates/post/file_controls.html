{% if post.files or post.embed and mod %}
<span class="controls">
{% if file.file != 'deleted' and mod|hasPermission(config.mod.deletefile, board.uri) %}
  {{ secure_link_confirm(config.mod.link_deletefile, 'Delete file'|trans, 'Are you sure you want to delete this file?'|trans, board.dir ~ 'deletefile/' ~ post.id ~ '/' ~ loop.index0 ) }}&nbsp;
{% endif %}
{% if file.file and file.file != 'deleted' and file.thumb != 'spoiler' and mod|hasPermission(config.mod.spoilerimage, board.uri) %}
  {{ secure_link_confirm(config.mod.link_spoilerimage, 'Spoiler file'|trans, 'Are you sure you want to spoiler this file?'|trans, board.dir ~ 'spoiler/' ~ post.id ~ '/' ~ loop.index0 ) }}
{% endif %}
{% if file.file and file.file != 'deleted' and file.thumb != 'spoiler' and mod|hasPermission(config.mod.spoilerimage, board.uri) %}
  {{ secure_link_confirm(config.mod.link_nsfwimage, 'NSFW file'|trans, 'Are you sure you want to NSFW this file?'|trans, board.dir ~ 'nsfw/' ~ post.id ~ '/' ~ loop.index0 ) }}
{% endif %}
{% if file.file and file.file != 'deleted' and file.thumb == 'spoiler' and mod|hasPermission(config.mod.spoilerimage, board.uri) %}
    {{ secure_link_confirm('{' ~  config.mod.link_spoilerimage ~ '}', 'Spoiler file'|trans, 'Are you sure you want to remove spoilers on this file?'|trans, board.dir ~ 'rm-spoiler/' ~ post.id ~ '/' ~ loop.index0 ) }}
{% endif %}
{% if file.file and file.hash != 'banned' and file.file and file.file != 'deleted' and mod|hasPermission(config.mod.bandeletehash, board.uri) %}
  <a href="?/{{board.dir}}hash/{{post.id}}">{{config.mod.link_hash}}</a>
{% endif %}
</span>
{% endif %}
